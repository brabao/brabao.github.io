<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Brabao]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://www.brabao.com.br/"/>
  <updated>2015-04-14T14:42:54.000Z</updated>
  <id>http://www.brabao.com.br/</id>
  
  <author>
    <name><![CDATA[Danilo Ribeiro da Silveira]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[AngularJS Route Resolve]]></title>
    <link href="http://www.brabao.com.br/AngularJS-Route-Resolve/"/>
    <id>http://www.brabao.com.br/AngularJS-Route-Resolve/</id>
    <published>2015-04-14T14:42:34.000Z</published>
    <updated>2015-04-14T14:42:54.000Z</updated>
    <content type="html"><![CDATA[<img src="/imagens/angularjs-route-resolve.png" title="AngularJS Route Resolve"><p>Um recurso muito interessante das rotas que não vejo muita gente usando é o resolve. Com ele é possível injetar algumas informações direto no controller.</p><p>Para ilustrar esse exemplo vamos simular uma operação de editar um usuário.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">app.config(<span class="function"><span class="keyword">function</span><span class="params">($routeProvider)</span></span>&#123;</span><br><span class="line">  $routeProvider</span><br><span class="line">  .when(<span class="string">'/Editar/:id'</span>, &#123; </span><br><span class="line">    controller: <span class="string">'UserCtrl'</span>, </span><br><span class="line">    templateUrl: <span class="string">'MyApp.html'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line">app.controller(<span class="string">"UserCtrl"</span>, <span class="function"><span class="keyword">function</span> <span class="params">($location, $routeParams, UserService)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">this</span>;</span><br><span class="line">  UserService.getUser($routeParams.id)</span><br><span class="line">    .success(<span class="function"><span class="keyword">function</span> <span class="params">(response)</span> </span>&#123; data.User = response; &#125;)</span><br><span class="line">    .error(<span class="function"><span class="keyword">function</span> <span class="params">(error)</span> </span>&#123; $location.path(<span class="string">'UserNotFound'</span>); &#125;);</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>No exemplo acima o controller faz a busca do usuário através do metodo <code>UserService.getUser</code> que faz uma requisição Ajax através do <code>$http.get</code>.</p><p>Se o usuário foi encontrado (<code>success</code>), preenchemos o scopo <code>User</code> com o <code>response</code>.</p><p>Se o usuário não foi encontrado (<code>error</code>), redirecionamos o usuário para outra rota através do <code>$location.path</code></p><p>Não seria mais interessante a rota verificar se existe o usuário e já injetar o <code>User</code> no controller?</p><h2 id="Vamos_ver_como_isso_funciona_na_prática-">Vamos ver como isso funciona na prática.</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">app.config(<span class="function"><span class="keyword">function</span><span class="params">($routeProvider)</span></span>&#123;</span><br><span class="line">  $routeProvider</span><br><span class="line">  .when(<span class="string">'/Editar/:id'</span>, &#123; </span><br><span class="line">    controller: <span class="string">'UserCtrl'</span>, </span><br><span class="line">    templateUrl: <span class="string">'MyApp.html'</span>,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      user: <span class="function"><span class="keyword">function</span><span class="params">($q, $location, $routeParams, UserService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> deferred = $q.defer();</span><br><span class="line">        UserService.getUser($routeParams.id)</span><br><span class="line">         .success(<span class="function"><span class="keyword">function</span> <span class="params">(response)</span> </span>&#123; deferred.resolve(response); &#125;)</span><br><span class="line">         .error(<span class="function"><span class="keyword">function</span> <span class="params">(error)</span> </span>&#123; $location.path(<span class="string">'UserNotFound'</span>); &#125;);</span><br><span class="line">        <span class="keyword">return</span> deferred.promise;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line">app.controller(<span class="string">"UserCtrl"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(user)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">this</span>;</span><br><span class="line">  data.User = user;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>No exemplo acima movemos toda a lógica para dentro da rota, aonde foi criado o objeto resolve que vai ser injetado no controller.</p><p>Também foi usado o serviço <code>$q</code> porque estamos fazendo uma requisição HTTP e devemos esperar que ela seja executada antes de chamar o controller.</p><p>Finalmente modificamos o controller que agora recebe o <code>user</code> como parâmetro.</p><p>Se você tem dúvidas sobre o funcionamento das promisses, serviço <code>$q</code>… recomendo a leitura do artigo <a href="http://nomadev.com.br/angularjs-promises-promessas-o-guia-definitivo/" target="_blank" rel="external">AngularJS Promises - O guia definitivo</a></p><p>Você também pode usar o resolve para injetar dados iniciais para o controller.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">app.config(<span class="function"><span class="keyword">function</span><span class="params">($routeProvider)</span></span>&#123;</span><br><span class="line">  $routeProvider</span><br><span class="line">  .when(<span class="string">'/Listar'</span>, &#123; </span><br><span class="line">    controller: <span class="string">'ListCtrl'</span>, </span><br><span class="line">    templateUrl: <span class="string">'MyApp.html'</span>,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      init: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          paginacao: &#123; itensPorPagina: <span class="number">10</span>, ordenarPor: <span class="string">'Nome'</span> &#125;,</span><br><span class="line">          codigos: [<span class="number">2</span>,<span class="number">5</span>,<span class="number">9</span>]</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br><span class="line">app.controller(<span class="string">"ListCtrl"</span>, <span class="function"><span class="keyword">function</span> <span class="params">($log, init)</span> </span>&#123;</span><br><span class="line">  $log.info(init.paginacao.itensPorPagina);</span><br><span class="line">  $log.info(init.paginacao.ordenarPor);</span><br><span class="line">  $log.info(init.codigos);</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>Até os próximos artigos!</p>]]></content>
    <summary type="html">
    <![CDATA[<img src="/imagens/angularjs-route-resolve.png" title="AngularJS Route Resolve"><p>Um recurso muito interessante das rotas que não vejo muit]]>
    </summary>
    
      <category term="AngularJS" scheme="http://www.brabao.com.br/tags/AngularJS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="http://www.brabao.com.br/hello-world/"/>
    <id>http://www.brabao.com.br/hello-world/</id>
    <published>2015-04-13T20:11:31.000Z</published>
    <updated>2015-04-13T20:11:31.000Z</updated>
    <content type="html"><![CDATA[<img src="/imagens/hello-world.png" title="Hello World"><h2 id="Estudou?_Faça_um_post…">Estudou? Faça um post…</h2><p>Dizem que quando você estuda e escreve, aprende duas vezes…</p><p>Este blog foi criado para compartilhar informações sobre o que estou estudando atualmente, minhas experiências em projetos que já desenvolvi, e também praticar um pouco a escrita de textos já que passamos a maior parte do tempo no computador programando.</p><h2 id="Quem_Sou?">Quem Sou?</h2><figure class="highlight javascript"><figcaption><span>about.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  Nome: <span class="string">"Danilo Ribeiro da Silveira"</span>, </span><br><span class="line">  Vulgo: <span class="string">"Brabao"</span>,</span><br><span class="line">  twitter: <span class="string">"@brabao"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Trabalho com desenvolvimento web à mais de 10 anos, comecei meus estudos com PHP, passei a programar em Asp.net e atualmente estou estudando bastante node.js, angular, mongodb etc</p><h2 id="Brabao?">Brabao?</h2><p>Hà alguns anos atrás trabalhando em um projeto com um time maior, sempre que eu fazia um módulo do sistema um amigo sempre comentava “esse cara é brabao…” e o time escutando isso logo começaram a me chamar de brabao. Passando um tempo fui criar uma conta no twitter e toda combinação que eu tentava com meu nome já existia… qual estava disponível?… e assim definitivamente surgiu o <a href="http://twitter.com/brabao" target="_blank" rel="external">@brabao</a> rs.</p><p>Até os próximos artigos!</p>]]></content>
    <summary type="html">
    <![CDATA[<img src="/imagens/hello-world.png" title="Hello World"><h2 id="Estudou?_Faça_um_post…">Estudou? Faça um post…</h2><p>Dizem que quando você ]]>
    </summary>
    
  </entry>
  
</feed>